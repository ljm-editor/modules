var P=Object.defineProperty;var l=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var d=(t,o,e)=>o in t?P(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,p=(t,o)=>{for(var e in o||(o={}))I.call(o,e)&&d(t,e,o[e]);if(l)for(var e of l(o))k.call(o,e)&&d(t,e,o[e]);return t};import{e as n,d as u,g as m,h as g}from"./main.a67208f8.js";import{c as y,m as _,W as b,r as c,a as C,g as j}from"./index.04e0b753.js";import"./vue-libs.882c34e2.js";const $={key:"ax21sa",topic:{},topicName:"\u5065\u5EB7\u4F53\u68C0",products:[{id:1,name:"\u631A\u7231\u7EA2\u989C\u4F53\u68C0\u5957\u9910",_coverImg:"https://img.mytijian.com/common/img/2022-04/1649903329-NiElcr.png",_price:1399,_linePrice:1399},{id:2,name:"\u5E94\u916C\u65CF\u4F53\u68C0\u5957\u9910",_coverImg:"https://img.mytijian.com/common/img/2022-04/1649903330-VTROoS.png",_price:2831,_linePrice:2831},{id:3,name:"\u5915\u9633\u7EA2\u5347\u7EA7\u4F53\u68C0\u5957\u9910\uFF0C\u5173\u7231\u8001\u5E74\u5065\u5EB7\u751F\u6D3B",_coverImg:"https://img.mytijian.com/common/img/2022-04/1649903330-8tlqjz.png",_price:1676,_linePrice:1676},{id:4,name:"\u5915\u9633\u7EA2\u5347\u7EA7\u4F53\u68C0\u5957\u9910\uFF0C\u5173\u7231\u8001\u5E74\u5065\u5EB7\u751F\u6D3B",_coverImg:"https://img.mytijian.com/common/img/2022-04/1649903330-8tlqjz.png",_price:1676,_linePrice:1676}]},[E,i]=y({name:"goods-hot-list",desc:"\u5546\u54C1\u63A8\u8350",group:"\u4E1A\u52A1\u6A21\u5757",tags:["\u5546\u54C1\u63A8\u8350","\u4E13\u9898"],order:7});var N={props:{column:Number,list:{type:Array,default:()=>[]}},mixins:[_],methods:{getProductStyle(t,o){const{addUnit:e}=this,s={marginRight:0};return(o+1)%2!==0&&(s.marginRight=e(10)),s},onClick(t){return()=>this.$emit("click",t)}},render(){const t=arguments[0];return t("div",{class:i("body")},[this.list.map((o,e)=>t("div",{class:i("product"),style:this.getProductStyle(o,e),on:{click:this.onClick(o)}},[t("div",{class:i("product-img"),style:{backgroundImage:`url(${o._coverImg})`}}),t("div",{class:i("product-info")},[t("div",{class:i("product-name")},[o.name]),t("div",{class:i("product-price")},[t("div",{class:i("product-price-sale")},[t("div",{class:i("product-price-unit")},["\uFFE5"]),t("div",{class:i("product-price-number")},[o._price])]),t("div",{class:i("product-price-origin")},["\uFFE5",o._linePrice])])])]))])}};const x={props:{goodsInfo:{type:Object,default:()=>({topic:{},products:[]}),editor:{type:"custom"}}},triggers:{onClickMore:"click:more",onClickItem:"click:item"},computed:{showGoodsInfo(){return this.isProduction?this.goodsInfo:this.goodsInfo.products.length===0?$:this.goodsInfo}},methods:{onClickMore(){const{eventNamespace:t,$options:o}=this,{triggers:e}=o,s=`${t}:${e.onClickMore}`;n.emit(s,{data:this.goodsInfo})},onClickItem(t){return()=>{const{eventNamespace:o,$options:e}=this,{triggers:s}=e,r=`${o}:${s.onClickItem}`;n.emit(r,{data:t})}}},render(){const t=arguments[0],{showGoodsInfo:o}=this,{topicName:e,products:s}=o;return t(b,{attrs:{wrapStyle:this.wrapStyle,innerStyle:this.wrapInnerStyle}},[t("div",{class:i()},[t("div",{class:i("head"),on:{click:this.onClickMore}},[t("div",{class:i("head-title")},[t("div",{class:i("head-title-txt")},[e])]),t("div",{class:i("head-more")},["\u66F4\u591A",t("div",{class:i("head-more-icon")})])]),t(N,{attrs:{list:s},on:{click:this.onClickItem}})])])}};var w=E(x);const v=w;const f="ljm-goods-hot-list-editor",a=C(f);var S={name:f,props:{moduleProps:{type:Object,default:()=>({goodsInfo:{topic:{},products:[]}})}},components:{draggable:u},data(){return{activedTopic:null}},methods:{onClickItem(t){return()=>{this.activedTopic=this.moduleProps.goodsInfo}},onDelete(t){return o=>{o.stopPropagation(),this.moduleProps.list.splice(t,1)}},onEdit(t){t.stopPropagation(),n.emit(m,{data:this.moduleProps.goodsInfo,success:({data:o})=>{this.moduleProps.goodsInfo=o,this.activedTopic=this.moduleProps.goodsInfo}})},onAdd(){n.emit(m,{success:({data:t})=>{t.key=c(),t.topicName=t.topicName||t.topic.name,t.bgColor=t.bgColor||"#ffffff",this.moduleProps.goodsInfo=t}})}},render(){const t=arguments[0],{moduleProps:o}=this,{goodsInfo:e}=o,s=e.products.length>0;return t("div",[!s&&t("div",{class:a("add")},[t("a-button",{attrs:{icon:"plus",size:"small"},on:{click:this.onAdd}},["\u6DFB\u52A0\u5546\u54C1\u8D27\u67B6"])]),s&&t("div",[t(u,{attrs:{handle:".ljm-goods-topic-editor-handle"},model:{value:this.moduleProps.list,callback:r=>{this.$set(this.moduleProps,"list",r)}}},[t("transition-group",[t("div",{class:a("topic-item",["actived"]),key:e.key,on:{click:this.onClickItem}},[t("div",{class:a("topic-item-name")},[e.topicName]),t("div",{class:a("topic-item-actions")},[t("a-button",{attrs:{type:"link",size:"small",icon:"edit"},on:{click:this.onEdit}})])])])]),t("div",{class:a("topic-edit")},[t("a-form",{attrs:{labelCol:{span:4},wrapperCol:{span:20}}},[t("a-form-item",{attrs:{label:"\u8D27\u67B6\u540D:"}},[t("a-input",{attrs:{size:"small"},style:"width: 186px",model:{value:e.topicName,callback:r=>{this.$set(e,"topicName",r)}}})]),t("a-form-item",{attrs:{label:"\u80CC\u666F\u56FE"}},[t("ext-img-select",{model:{value:e.bgImg,callback:r=>{this.$set(e,"bgImg",r)}}})]),t("a-form-item",{attrs:{label:"\u80CC\u666F\u8272"}},[t("ext-color-picker",{model:{value:e.bgColor,callback:r=>{this.$set(e,"bgColor",r)}}})])])])])])}};const{defaultProps:z,editProps:M,wrapEditProps:A,hasCustomEditor:D}=j(v),h=()=>({topic:{id:c(),name:"\u9ED8\u8BA4\u8D27\u67B6"},products:[{id:c(),name:"\u5E94\u916C\u65CF\u4F53\u68C0\u5957\u9910",_coverImg:"https://img.mytijian.com/common/img/2022-04/1649903330-VTROoS.png",_price:2831,_linePrice:2900},{id:c(),name:"\u5915\u9633\u7EA2\u5347\u7EA7\u4F53\u68C0\u5957\u9910\uFF0C\u5173\u7231\u8001\u5E74\u5065\u5EB7\u751F\u6D3B",_coverImg:"https://img.mytijian.com/common/img/2022-04/1649903330-8tlqjz.png",_price:1676,_linePrice:2e3},{id:c(),name:"\u5915\u9633\u7EA2\u5347\u7EA7\u4F53\u68C0\u5957\u9910\uFF0C\u5173\u7231\u8001\u5E74\u5065\u5EB7\u751F\u6D3B",_coverImg:"https://img.mytijian.com/common/img/2022-04/1649903330-8tlqjz.png",_price:1676,_linePrice:1676},{id:c(),name:"\u5915\u9633\u7EA2\u5347\u7EA7\u4F53\u68C0\u5957\u9910\uFF0C\u5173\u7231\u8001\u5E74\u5065\u5EB7\u751F\u6D3B",_coverImg:"https://img.mytijian.com/common/img/2022-04/1649903330-8tlqjz.png",_price:1676,_linePrice:1676}]});var O={data(){return{moduleProps:z}},mounted(){n.off(m),n.on(m,({data:t,success:o})=>{o(t?{data:h()}:{data:h()})})},render(){const t=arguments[0];return t("div",[t("demo-layout",{attrs:{editProps:M,wrapEditProps:A,defaultProps:this.moduleProps},scopedSlots:{left:o=>t(v,g([{},{props:p({},o)}])),right:o=>D?t(S,g([{},{props:{moduleProps:o}}])):null}})])}};export{O as default};
